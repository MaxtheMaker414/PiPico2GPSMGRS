import config

def draw_icon(name, display, x, y, scale=1):
    # Platzhalter für bestehende Icons
    pass

def draw_compass_arrow(display, x, y, direction):
    """
    Zeichnet einen sichtbaren 16x16-Pfeil für die gegebene Himmelsrichtung.
    x, y = obere linke Ecke des Pfeils
    direction = 'N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'
    """
    arrows = {
        'N':  [(7,0),(8,0),(7,1),(8,1),(6,2),(7,2),(8,2),(9,2),(7,3),(8,3)],
        'NE': [(11,1),(12,2),(13,3),(14,4),(13,5),(12,6)],
        'E':  [(15,7),(14,7),(13,7),(12,7),(11,7),(10,6),(10,7),(10,8)],
        'SE': [(13,13),(12,12),(11,11),(10,10),(9,11),(8,12)],
        'S':  [(7,15),(8,15),(7,14),(8,14),(6,13),(7,13),(8,13),(9,13)],
        'SW': [(1,13),(2,12),(3,11),(4,10),(3,9),(2,8)],
        'W':  [(0,7),(1,7),(2,7),(3,7),(4,7),(5,6),(5,7),(5,8)],
        'NW': [(2,2),(3,3),(4,4),(5,5),(4,6),(3,7)],
    }

    display.set_pen(config.FOREGROUND_COLOR)
    points = arrows.get(direction, [])
    for px, py in points:
        display.rectangle(x + px, y + py, 2, 2)  # 2×2 Pixel für bessere Sichtbarkeit


# 16x16 Bitmaps für jede Himmelsrichtung
# 1 = Pixel sichtbar, 0 = leer
ARROW_BITMAPS = {
    'N': [
        "0000010000000000",
        "0000111000000000",
        "0001111100000000",
        "0011111110000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000000000000000",
        "0000000000000000"
    ],
    'NE': [
        "0000000000000001",
        "0000000000000011",
        "0000000000000110",
        "0000000000001100",
        "0000000000011000",
        "0000000000110000",
        "0000000001100000",
        "0000000011000000",
        "0000000110000000",
        "0000001100000000",
        "0000011000000000",
        "0000110000000000",
        "0001100000000000",
        "0011000000000000",
        "0000000000000000",
        "0000000000000000"
    ],
    'E': [
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "1111111111111111",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "1111111111111111",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000"
    ],
    'SE': [
        "0011000000000000",
        "0001100000000000",
        "0000110000000000",
        "0000011000000000",
        "0000001100000000",
        "0000000110000000",
        "0000000011000000",
        "0000000001100000",
        "0000000000110000",
        "0000000000011000",
        "0000000000001100",
        "0000000000000110",
        "0000000000000011",
        "0000000000000001",
        "0000000000000000",
        "0000000000000000"
    ],
    'S': [
        "0000000000000000",
        "0000000000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0000010000000000",
        "0011111110000000",
        "0001111100000000",
        "0000111000000000",
        "0000010000000000",
        "0000000000000000"
    ],
    'SW': [
        "1100000000000000",
        "1110000000000000",
        "0111000000000000",
        "0011100000000000",
        "0001110000000000",
        "0000111000000000",
        "0000011100000000",
        "0000001110000000",
        "0000000111000000",
        "0000000011100000",
        "0000000001110000",
        "0000000000111000",
        "0000000000011100",
        "0000000000001110",
        "0000000000000111",
        "0000000000000011"
    ],
    'W': [
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "1111111111111111",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "1111111111111111",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000",
        "0000000000000000"
    ],
    'NW': [
        "0000000000001100",
        "0000000000011000",
        "0000000000110000",
        "0000000001100000",
        "0000000011000000",
        "0000000110000000",
        "0000001100000000",
        "0000011000000000",
        "0000110000000000",
        "0001100000000000",
        "0011000000000000",
        "0110000000000000",
        "1100000000000000",
        "1000000000000000",
        "0000000000000000",
        "0000000000000000"
    ],
}


def draw_compass_arrow(display, x, y, direction):
    """
    Zeichnet einen 16x16 Bitmap-Pfeil für die Richtung.
    direction: 'N', 'NE', ..., 'SW'
    (x, y) ist die linke obere Ecke des Bildes.
    """
    bitmap = ARROW_BITMAPS.get(direction.upper(), [])
    display.set_pen(config.FOREGROUND_COLOR)
    for row, line in enumerate(bitmap):
        for col, char in enumerate(line):
            if char == '1':
                display.pixel(x + col, y + row)
